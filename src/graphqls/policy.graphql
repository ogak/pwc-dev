query policies($filter: BaseScalar!) {
  policies(filter: $filter) {
    collection {
      id
      title
      policyCategoryId
      parentId
      policyCategory {
        id
        name
      }
      ancestry
      description
    }
  }
}

query policyTree {
  policies(filter: { ancestry_null: true }) {
    collection {
      ...policyBranch
      children {
        ...policyBranch
        children {
          ...policyBranch
          children {
            ...policyBranch
            children {
              ...policyBranch
              children {
                ...policyBranch
              }
            }
          }
        }
      }
    }
  }
}

fragment policyBranch on Policy {
  id
  title
  parentId
}

query policy($id: ID!) {
  policy(id: $id) {
    ...policyFragment
  }
}

fragment policyFragment on Policy {
  id
  title
  policyCategory {
    id
    name
  }
  ancestry
  description
  parentId
  children {
    id
    title
    policyCategory {
      id
      name
    }
    policyCategoryId
    references {
      id
      name
    }
    ancestry
    description
    parentId
  }
  resources { id name }
  itSystems { id name }
  businessProcesses { id name }
}

query policyCategories($filter: BaseScalar!) {
  policyCategories(filter: $filter) {
    collection {
      id
      name
    }
  }
}

mutation destroyPolicy($id: ID!) {
  destroyPolicy(input: { id: $id }) {
    clientMutationId
  }
}

mutation createPolicy($input: CreatePolicyInput!) {
  createPolicy(input: $input) {
    clientMutationId
    policy {
      id
    }
  }
}

mutation updatePolicy($input: UpdatePolicyInput!) {
  updatePolicy(input: $input) {
    clientMutationId
  }
}

mutation createSubPolicy($input: CreateSubPolicyInput!) {
  createSubPolicy(input: $input) {
    clientMutationId
  }
}
